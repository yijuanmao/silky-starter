<p align="center"> 
<strong>è®©å¼€å‘å¦‚ä¸èˆ¬é¡ºæ»‘çš„å¼€ç®±å³ç”¨ç»„ä»¶åº“</strong> 
</p>
<div align="center">

[![Java 1.8+](https://img.shields.io/badge/Java-1.8+-orange.svg)]()
[![Spring Boot 2.7.x](https://img.shields.io/badge/Spring%20Boot-2.7.x-brightgreen.svg)]()
[![Maven 3.10+](https://img.shields.io/badge/Maven-3.10+-blue.svg)]()
[![License Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-lightgrey.svg)]()

</div>

## ğŸ“š ç®€ä»‹

silky-starter æ˜¯ä¸€æ¬¾ä¸“ä¸ºæå‡å¼€å‘æ•ˆç‡è€Œè®¾è®¡çš„ä¸æ»‘ç»„ä»¶åº“ï¼Œå–å"silky"å¯“æ„å¼€å‘ä½“éªŒå¦‚ä¸ç»¸èˆ¬é¡ºæ»‘ã€‚ç»„ä»¶åº“æä¾›ç»Ÿä¸€çš„OSSæ–‡ä»¶æ“ä½œæ¥å£ï¼Œæ”¯æŒå¤šç§äº‘å­˜å‚¨å¹³å°ï¼Œé‡‡ç”¨æ™ºèƒ½ç­–ç•¥æ¨¡å¼è®¾è®¡ï¼Œè®©æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½å’Œç®¡ç†å˜å¾—å¼‚å¸¸ç®€å•å’Œé«˜æ•ˆã€‚

ä¸æ»‘ä½“éªŒï¼Œå¼€ç®±å³ç”¨ - åªéœ€ç®€å•é…ç½®ï¼Œå³å¯äº«å—ä¸æ»‘èˆ¬çš„å¼€å‘ä½“éªŒï¼Œå¤§å¹…å‡å°‘é‡å¤ä»£ç ç¼–å†™ï¼Œæå‡é¡¹ç›®è´¨é‡å’Œç¨³å®šæ€§ã€‚

## âœ¨ ä¸æ»‘ç‰¹æ€§
- ğŸ§Š ä¸æ»‘ä½“éªŒ: ç®€æ´APIè®¾è®¡ï¼Œè®©æ¯æ¬¡è°ƒç”¨éƒ½å¦‚ä¸èˆ¬é¡ºæ»‘
- ğŸš€ æ™ºèƒ½ä¸Šä¼ : æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸Šä¼ æ–¹å¼ï¼Œæ™ºèƒ½åˆçœå¿ƒ
- âš¡ å¤šäº‘æ”¯æŒ: é˜¿é‡Œäº‘OSSã€åä¸ºäº‘OBSç­‰ï¼ˆå¯æ‰©å±•ï¼‰ï¼Œåˆ‡æ¢å¦‚ä¸é¡ºæ»‘
- ğŸ”„ æ–­ç‚¹ç»­ä¼ : å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼ ï¼Œç½‘ç»œæ³¢åŠ¨ä¸å½±å“ä¸æ»‘ä½“éªŒ
- ğŸ“Š è¿›åº¦ç›‘æ§: å®æ—¶è·å–ä¸Šä¼ è¿›åº¦ä¿¡æ¯ï¼Œè¿›åº¦å±•ç¤ºæ¸…æ™°æµç•…
- ğŸ”’ å®‰å…¨å¯æ§: æ”¯æŒåŠ å¯†ä¸Šä¼ å’Œæƒé™æ§åˆ¶ï¼Œå®‰å…¨åˆä¸å¤±ä¾¿æ·
- ğŸ“¦ å¼€ç®±å³ç”¨: ç®€å•é…ç½®å³å¯å¿«é€Ÿé›†æˆï¼ŒçœŸæ­£å®ç°äº”åˆ†é’Ÿä¸Šæ‰‹

## ğŸ“‹ ç›®å½•
- [ä¸æ»‘ç‰¹æ€§](#ä¸æ»‘ç‰¹æ€§)
- [æŠ€æœ¯æ ˆè¦æ±‚](#æŠ€æœ¯æ ˆè¦æ±‚)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [APIæ¥å£è¯´æ˜](#APIæ¥å£è¯´æ˜)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
- [æ‰©å±•åŠŸèƒ½](#æ‰©å±•åŠŸèƒ½)
- [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
- [è·å–å¸®åŠ©](#è·å–å¸®åŠ©)

## ğŸ“œæŠ€æœ¯æ ˆè¦æ±‚

- JDK 1.8+
- Spring Boot 2.7.x
- Maven 3.10+

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

``` text
silky-starter
â”œâ”€ silky-oss-spring-boot-starterï¼ˆOSSç»„ä»¶æ¨¡å—ï¼Œæ–‡ä»¶ã€å›¾ç‰‡ä¸Šä¼ ä¸‹è½½ï¼Œæ”¯æŒï¼šé˜¿é‡Œäº‘ã€åä¸ºäº‘ç­‰ï¼‰
â”œâ”€ silky-starter-coreï¼ˆæ ¸å¿ƒæ¨¡å—,å…¬å…±å¸¸ç”¨çš„å·¥å…·åŒ…ç±»ï¼‰
â”œâ”€ silky-starter-testï¼ˆæµ‹è¯•æ¨¡å—ï¼‰
â”‚  â”œâ”€ silky-starter-oss-testï¼ˆOSSç»„ä»¶æµ‹è¯•æ¨¡å—ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ ä¾èµ–ï¼š

åœ¨`pom.xml`ä¸­æ·»åŠ ä¾èµ–ï¼Œå¼€å¯ä¸æ»‘ä½“éªŒï¼š

```xml

<dependencies>

    <dependency>
        <groupId>com.silky.starter</groupId>
        <artifactId>silky-oss-spring-boot-starter</artifactId>
        <version>${æœ€æ–°ç‰ˆæœ¬}</version>
    </dependency>

    <!-- æ ¹æ®é…ç½®é€‰æ‹©å¯¹åº”çš„ä¾èµ–åŒ… start -->
    <!-- é˜¿é‡Œäº‘oss -->
    <dependency>
        <groupId>com.aliyun.oss</groupId>
        <artifactId>aliyun-sdk-oss</artifactId>
        <version>3.18.3</version>
    </dependency>

    <!-- åä¸ºäº‘ OBS -->
    <dependency>
        <groupId>com.huaweicloud</groupId>
        <artifactId>esdk-obs-java</artifactId>
        <version>3.25.7</version>
    </dependency>
    <!-- æ ¹æ®é…ç½®é€‰æ‹©å¯¹åº”çš„ä¾èµ–åŒ… end -->

</dependencies>
```

### 2. å¯ç”¨ç»„ä»¶

å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ï¼Œå¼€å¯ä¸æ»‘OSSåŠŸèƒ½ï¼š

```java

@SpringBootApplication
@ComponentScan({"com.silky.**"})
public class TestAppApplication {
    public static void main(String[] args) {
        SpringApplication.run(TestAppApplication.class, args);
    }
}
```

### 3. é…ç½®å‚æ•°

åœ¨`application.yml`ä¸­æ·»åŠ é…ç½®ï¼š

```yaml
silky:
  oss:
    access-key: ä½ çš„AccessKey
    secret-key: ä½ çš„SecretKey
    bucket: ä½ çš„Bucketåç§°
    # åˆ†ç‰‡ä¸Šä¼ çš„é˜ˆå€¼,é»˜è®¤128MBï¼Œå•ä½å­—èŠ‚ï¼Œæ–‡ä»¶è¶…è¿‡æ­¤å¤§å°å°†è‡ªåŠ¨åˆ†ç‰‡ä¸Šä¼ 
    multipart-threshold: 134217728 # 128 * 1024 * 1024
    # è‡ªåŠ¨åˆ†ç‰‡ä¸Šä¼ æ—¶æ¯ä¸ªåˆ†ç‰‡å¤§å°ï¼Œé»˜è®¤ 32MB
    multipart-part-size: 33554432 # 32 * 1024 * 1024
    # å¹³å°ï¼šaliyunã€huawei
    provider: aliyun
    # é˜¿é‡Œäº‘é…ç½®
    aliyun:
      endpoint: é˜¿é‡Œäº‘OSSçš„Endpoint
    # åä¸ºäº‘é…ç½®
    huawei:
      endpoint: åä¸ºäº‘çš„Endpoint
```

## ğŸ”§ API æ¥å£è¯´æ˜

### æ ¸å¿ƒæ–¹æ³•

| æ–¹æ³•              | è¯´æ˜               | å‚æ•°                   |
|-----------------|------------------|----------------------|
| smartUpload     | æ™ºèƒ½ä¸Šä¼ ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸Šä¼ æ–¹å¼ï¼‰ | OssUploadParam       |
| downloadFile    | ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°          | DownloadFileOssParam |
| getFileMetadata | åˆ é™¤äº‘ç«¯æ–‡ä»¶           | DeleteFileOssParam   |
| deleteFile      | è·å–æ–‡ä»¶å…ƒæ•°æ®          | GetFileMetadataParam |
| genPreSignedUrl | ç”Ÿæˆé¢„ç­¾åURL         | GenPreSignedUrlParam |

### é«˜çº§ä¸Šä¼ åŠŸèƒ½

| æ–¹æ³•                         | è¯´æ˜         |
|----------------------------|------------|
| standardUploadWithCallback | å¸¦å›è°ƒçš„æ ‡å‡†ä¸Šä¼    |
| initiateMultipartUpload    | åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼     |
| uploadPart                 | ä¸Šä¼ åˆ†ç‰‡       | 
| completeMultipartUpload    | å®Œæˆåˆ†ç‰‡ä¸Šä¼      |
| abortMultipartUpload       | ç»ˆæ­¢åˆ†ç‰‡ä¸Šä¼      |
| listUploadedParts          | è·å–å·²ä¸Šä¼ çš„åˆ†ç‰‡åˆ—è¡¨ |

### æ‰©å±•åŠŸèƒ½

| æ–¹æ³•                       | è¯´æ˜                |
|--------------------------|-------------------|
| switchProvider           | åˆ‡æ¢äº‘æœåŠ¡æä¾›å•†(å¾…å®Œå–„)     |
| registerProvider         | 	æ³¨å†Œè‡ªå®šä¹‰äº‘æœåŠ¡æä¾›å•† å¾…å®Œå–„) |
| setDefaultUploadStrategy | è®¾ç½®é»˜è®¤ä¸Šä¼ ç­–ç•¥  å¾…å®Œå–„)    | 

## ğŸ§ª ä½¿ç”¨ç¤ºä¾‹

åŸºæœ¬æ–‡ä»¶æ“ä½œï¼ˆä¸æ»‘ä½“éªŒï¼‰ï¼šï¼š

```java
package com.silky.starter.oss.template;

import com.silky.starter.oss.OssApplicationTest;
import com.silky.starter.oss.core.enums.OssFileTypeEnum;
import com.silky.starter.oss.model.metadata.OssFileMetadata;
import com.silky.starter.oss.model.param.DeleteFileOssParam;
import com.silky.starter.oss.model.param.DownloadFileOssParam;
import com.silky.starter.oss.model.param.GetFileMetadataParam;
import com.silky.starter.oss.model.param.OssUploadParam;
import com.silky.starter.oss.model.result.OssUploadResult;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;

import java.io.File;
import java.time.LocalDateTime;

/**
 * OSSæ¨¡æ¿æµ‹è¯•ç±»
 *
 * @author zy
 * @date 2025-08-14 15:52
 **/
public class OssTemplateTest extends OssApplicationTest {
    @Autowired
    private OssTemplate ossTemplate;

    /**
     * æ™ºèƒ½ä¸Šä¼ æµ‹è¯•æ–¹æ³•
     */
    @Test
    public void testSmartUpload() {
        OssUploadParam param = new OssUploadParam();
        param.setObjectKey("test/1755681995122.png");
        //æ–‡ä»¶ Fileå’Œ Stream äºŒé€‰ä¸€
        param.setFile(new File("C:\\Users\\Administrator\\Desktop\\1755681995122.png"));
//        param.setStream();

        //ä»¥ä¸‹å‚æ•°å¯é€‰
        param.setExpiration(LocalDateTime.now().plusMinutes(5)); // è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºå½“å‰æ—¶é—´åŠ 5åˆ†é’Ÿ
        param.setContentType(OssFileTypeEnum.PNG.getContentType()); // è®¾ç½®æ–‡ä»¶ç±»å‹ä¸ºPNG
//        param.setMetadata(); // è®¾ç½®è‡ªå®šä¹‰å…ƒæ•°æ®ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ä¸è®¾ç½®
//        param.setFileSize(); // è®¾ç½®æ–‡ä»¶å¤§å°ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ä¸è®¾ç½®
//        param.setPublicRead(); // è®¾ç½®æ˜¯å¦å…¬å¼€å¯è¯»ï¼Œé»˜è®¤ä¸ºtrue
//        param.setEnableEncryption(); // è®¾ç½®æ˜¯å¦å¯ç”¨åŠ å¯†ï¼Œé»˜è®¤ä¸ºfalse
        OssUploadResult result = ossTemplate.smartUpload(param);
        log.info("æ™ºèƒ½ä¸Šä¼ æµ‹è¯•æ–¹æ³•ossä¸Šä¼ ç»“æœ: {}", result);
    }

    /**
     * åˆ é™¤æ–‡ä»¶æµ‹è¯•
     */
    @Test
    public void testDeleteFile() {
        DeleteFileOssParam param = new DeleteFileOssParam();
        param.setObjectKey("test/1755681995122.png");
        ossTemplate.deleteFile(param);
        log.info("åˆ é™¤æ–‡ä»¶æµ‹è¯•æˆåŠŸ");
    }

    /**
     * å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°æµ‹è¯•
     */
    @Test
    public void testDownloadFile() {
        DownloadFileOssParam param = new DownloadFileOssParam();
        param.setObjectKey("test/1755681995122.png");
        param.setLocalFilePath("D:\\download\\11.png");
        ossTemplate.downloadFile(param);
        log.info("å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°æµ‹è¯•");
    }

    /**
     * è·å–æ–‡ä»¶å…ƒæ•°æ®æµ‹è¯•
     */
    @Test
    public void testGetFileMetadata() {
        GetFileMetadataParam param = new GetFileMetadataParam();
        param.setObjectKey("test/1755681995122.png");
        OssFileMetadata fileMetadata = ossTemplate.getFileMetadata(param);
        log.info("è·å–æ–‡ä»¶å…ƒæ•°æ®æµ‹è¯•,å“åº”ç»“æœï¼š" + fileMetadata);
    }
}
```

é«˜çº§åŠŸèƒ½ç¤ºä¾‹ï¼ˆæè‡´ä¸æ»‘ï¼‰ï¼š

```java
/**
 * OSSæ¨¡æ¿æµ‹è¯•ç±»
 *
 * @author zy
 * @date 2025-08-14 15:52
 **/
public class OssTemplateTest extends OssApplicationTest {

    // ç”Ÿæˆé¢„ç­¾åURLï¼ˆç”¨äºä¸´æ—¶è®¿é—®ï¼‰
    @Test
    public void testGenPreSignedUrl() {
        GenPreSignedUrlParam param = new GenPreSignedUrlParam();
        param.setObjectKey("test/1755681995122.png");
        param.setExpirationMinutes(30); // 30åˆ†é’Ÿæœ‰æ•ˆæœŸ

        GenPreSignedUrlResult result = ossTemplate.genPreSignedUrl(param);
        log.info("é¢„ç­¾åURL: {}", result.getUrl());
    }

    // åˆ†ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶
    @Test
    public void testMultipartUpload() {
        // 1. åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ 
        InitiateMultipartUploadParam initParam = new InitiateMultipartUploadParam();
        initParam.setObjectKey("largefile.zip");
        InitiateMultipartResult initResult = ossTemplate.initiateMultipartUpload(initParam);

        String uploadId = initResult.getUploadId();

        // 2. ä¸Šä¼ å„ä¸ªåˆ†ç‰‡
        for (int i = 0; i < partCount; i++) {
            UploadPartParam partParam = new UploadPartParam();
            partParam.setUploadId(uploadId);
            partParam.setPartNumber(i + 1);
            partParam.setInputStream(partInputStream);

            UploadPartResult partResult = ossTemplate.uploadPart(partParam);
            // ä¿å­˜åˆ†ç‰‡ETagä¿¡æ¯
        }

        // 3. å®Œæˆåˆ†ç‰‡ä¸Šä¼ 
        CompleteMultipartUploadParam completeParam = new CompleteMultipartUploadParam();
        completeParam.setUploadId(uploadId);
        completeParam.setObjectKey("largefile.zip");
        completeParam.setPartEtags(partEtags);

        CompleteMultipartUploadResult result = ossTemplate.completeMultipartUpload(completeParam);
        log.info("åˆ†ç‰‡ä¸Šä¼ å®Œæˆ: {}", result);
    }
}
``` 

## ğŸ”„ æ‰©å±•è‡ªå®šä¹‰äº‘æœåŠ¡

```java
// æ³¨å†Œè‡ªå®šä¹‰äº‘æœåŠ¡æä¾›å•†
@Configuration
public class OssConfig {

    @Bean
    public void registerCustomProvider(OssTemplate ossTemplate) {
        // åˆ›å»ºè‡ªå®šä¹‰æä¾›å•†é€‚é…å™¨
        OssProviderAdapter customAdapter = new CustomOssProviderAdapter();

        // æ³¨å†Œåˆ°OSSæ¨¡æ¿
        ossTemplate.registerProvider("custom", customAdapter);
    }
}

/**
 * OSSæ¨¡æ¿æµ‹è¯•ç±»
 *
 * @author zy
 * @date 2025-08-14 15:52
 **/
public class OssTemplateTest extends OssApplicationTest {

    // åˆ‡æ¢äº‘æœåŠ¡æä¾›å•†
    @Test
    public void testSwitchProvider() {
        // åˆ‡æ¢åˆ°åä¸ºäº‘
        ossTemplate.switchProvider("huawei");

        // æ‰§è¡Œä¸Šä¼ æ“ä½œ
        OssUploadParam param = new OssUploadParam();
        // ... è®¾ç½®å‚æ•°
        OssUploadResult result = ossTemplate.smartUpload(param);
    }
}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. ä¸Šä¼ å¤§æ–‡ä»¶æ—¶ï¼ˆè¶…è¿‡128MBï¼‰ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨å¯ç”¨åˆ†ç‰‡ä¸Šä¼ åŠŸèƒ½ã€‚
2. æ”¯æŒè‡ªå®šä¹‰ä¸Šä¼ ç­–ç•¥ï¼Œå¯é€šè¿‡setDefaultUploadStrategyæ–¹æ³•è®¾ç½®ã€‚
3. ç»„ä»¶å†…ç½®å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šæŠ›å‡ºç»Ÿä¸€çš„OssExceptionã€‚
4. æ”¯æŒé€šè¿‡switchProvideræ–¹æ³•åŠ¨æ€åˆ‡æ¢äº‘æœåŠ¡æä¾›å•†ã€‚

## ğŸ†˜ è·å–å¸®åŠ©

1. å¦‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ”¯æŒï¼š824414828@qq.com
2. æŸ¥çœ‹ç»„ä»¶æºç ï¼šsilky-oss-spring-boot-starterã€‚
3. å‚è€ƒæµ‹è¯•ç¤ºä¾‹ï¼šsilky-starter-oss-testã€‚
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒã€‚


<div align="center">

# silky-starter - è®©æ¯ä¸€æ¬¡å¼€å‘éƒ½å¦‚ä¸èˆ¬é¡ºæ»‘

[![ä½“éªŒ-ä¸æ»‘ä¸€èˆ¬é¡ºæ»‘](https://img.shields.io/badge/ä½“éªŒ-ä¸æ»‘ä¸€èˆ¬é¡ºæ»‘-ff69b4.svg)]()
[![ç‰¹æ€§-å¼€ç®±å³ç”¨](https://img.shields.io/badge/ç‰¹æ€§-å¼€ç®±å³ç”¨-green.svg)]()
[![ç›®æ ‡-é«˜æ•ˆå¼€å‘](https://img.shields.io/badge/ç›®æ ‡-é«˜æ•ˆå¼€å‘-blue.svg)]()
</div>


