<div align="center">

# silky-starter - è®©æ¯ä¸€æ¬¡å¼€å‘éƒ½å¦‚ä¸èˆ¬é¡ºæ»‘

[![ä½“éªŒ-ä¸æ»‘ä¸€èˆ¬é¡ºæ»‘](https://img.shields.io/badge/ä½“éªŒ-ä¸æ»‘ä¸€èˆ¬é¡ºæ»‘-ff69b4.svg)]()
[![ç‰¹æ€§-å¼€ç®±å³ç”¨](https://img.shields.io/badge/ç‰¹æ€§-å¼€ç®±å³ç”¨-green.svg)]()
[![ç›®æ ‡-é«˜æ•ˆå¼€å‘](https://img.shields.io/badge/ç›®æ ‡-é«˜æ•ˆå¼€å‘-blue.svg)]()
</div>

<div align="center">

[![Java 1.8+](https://img.shields.io/badge/Java-1.8+-orange.svg)]()
[![Spring Boot 2.7.x](https://img.shields.io/badge/Spring%20Boot-2.7.x-brightgreen.svg)]()
[![Maven 3.10+](https://img.shields.io/badge/Maven-3.10+-blue.svg)]()
[![License Apache 2.0](https://img.shields.io/badge/License-Apache%202.0-lightgrey.svg)]()

</div>

## ğŸ“š ç®€ä»‹

silky-starter æ˜¯ä¸€æ¬¾ä¸“ä¸ºæå‡å¼€å‘æ•ˆç‡è€Œè®¾è®¡çš„ä¸æ»‘ç»„ä»¶åº“ï¼Œå–å"silky"
å¯“æ„å¼€å‘ä½“éªŒå¦‚ä¸ç»¸èˆ¬é¡ºæ»‘ã€‚ç»„ä»¶åº“æä¾›ç»Ÿä¸€çš„OSSæ–‡ä»¶æ“ä½œæ¥å£å’ŒMongoDBæ•°æ®è®¿é—®æ¥å£ï¼Œé‡‡ç”¨æ™ºèƒ½ç­–ç•¥æ¨¡å¼è®¾è®¡ï¼Œè®©æ–‡ä»¶æ“ä½œå’Œæ•°æ®åº“è®¿é—®å˜å¾—å¼‚å¸¸ç®€å•å’Œé«˜æ•ˆã€‚

ä¸æ»‘ä½“éªŒï¼Œå¼€ç®±å³ç”¨ - åªéœ€ç®€å•é…ç½®ï¼Œå³å¯äº«å—ä¸æ»‘èˆ¬çš„å¼€å‘ä½“éªŒï¼Œå¤§å¹…å‡å°‘é‡å¤ä»£ç ç¼–å†™ï¼Œæå‡é¡¹ç›®è´¨é‡å’Œç¨³å®šæ€§ã€‚

## âœ¨ ä¸æ»‘ç‰¹æ€§

- ğŸ§Š ä¸æ»‘ä½“éªŒ: ç®€æ´APIè®¾è®¡ï¼Œè®©æ¯æ¬¡è°ƒç”¨éƒ½å¦‚ä¸èˆ¬é¡ºæ»‘
- ğŸš€ æ™ºèƒ½ä¸Šä¼ : æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸Šä¼ æ–¹å¼ï¼Œæ™ºèƒ½åˆçœå¿ƒ
- âš¡ å¤šäº‘æ”¯æŒ: é˜¿é‡Œäº‘OSSã€åä¸ºäº‘OBSç­‰ï¼ˆå¯æ‰©å±•ï¼‰ï¼Œåˆ‡æ¢å¦‚ä¸é¡ºæ»‘
- ğŸ”„ æ–­ç‚¹ç»­ä¼ : å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼ ï¼Œç½‘ç»œæ³¢åŠ¨ä¸å½±å“ä¸æ»‘ä½“éªŒ
- ğŸ“Š è¿›åº¦ç›‘æ§: å®æ—¶è·å–ä¸Šä¼ è¿›åº¦ä¿¡æ¯ï¼Œè¿›åº¦å±•ç¤ºæ¸…æ™°æµç•…
- ğŸ”’ å®‰å…¨å¯æ§: æ”¯æŒåŠ å¯†ä¸Šä¼ å’Œæƒé™æ§åˆ¶ï¼Œå®‰å…¨åˆä¸å¤±ä¾¿æ·
- ğŸ“¦ å¼€ç®±å³ç”¨: ç®€å•é…ç½®å³å¯å¿«é€Ÿé›†æˆï¼ŒçœŸæ­£å®ç°äº”åˆ†é’Ÿä¸Šæ‰‹
- ğŸƒ MongoDBæ”¯æŒ: æä¾›ç®€æ´é«˜æ•ˆçš„MongoDBæ“ä½œæ¥å£ï¼Œæ•°æ®æ“ä½œå¦‚ä¸é¡ºæ»‘

## ğŸ“‹ ç›®å½•

- [ä¸æ»‘ç‰¹æ€§](#ä¸æ»‘ç‰¹æ€§)
- [æŠ€æœ¯æ ˆè¦æ±‚](#æŠ€æœ¯æ ˆè¦æ±‚)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
    - [OSSå¿«é€Ÿå¼€å§‹](#OSSå¿«é€Ÿå¼€å§‹)
    - [MongoDBå¿«é€Ÿå¼€å§‹](#MongoDBå¿«é€Ÿå¼€å§‹)
- [APIæ¥å£è¯´æ˜](#APIæ¥å£è¯´æ˜)
    - [OSS APIæ¥å£è¯´æ˜](#OSS APIæ¥å£è¯´æ˜)
    - [MongoDB APIæ¥å£è¯´æ˜](#MongoDB APIæ¥å£è¯´æ˜)
- [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
    - [OSSä½¿ç”¨ç¤ºä¾‹](#OSSä½¿ç”¨ç¤ºä¾‹)
    - [MongoDBä½¿ç”¨ç¤ºä¾‹](#MongoDBä½¿ç”¨ç¤ºä¾‹)
- [æ‰©å±•åŠŸèƒ½](#æ‰©å±•åŠŸèƒ½)
- [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
- [è·å–å¸®åŠ©](#è·å–å¸®åŠ©)

## ğŸ“œæŠ€æœ¯æ ˆè¦æ±‚

- JDK 1.8+
- Spring Boot 2.7.x
- Maven 3.10+

## ğŸ—‚ï¸ é¡¹ç›®æ¨¡å—

silky-starter åŒ…å«ä»¥ä¸‹ç‹¬ç«‹ç»„ä»¶æ¨¡å—ï¼š

``` text
silky-starter
â”œâ”€ silky-oss-spring-boot-starterï¼ˆOSSç»„ä»¶æ¨¡å—ï¼Œæ–‡ä»¶ã€å›¾ç‰‡ä¸Šä¼ ä¸‹è½½ï¼Œæ”¯æŒï¼šé˜¿é‡Œäº‘ã€åä¸ºäº‘ç­‰ï¼‰
â”œâ”€ silky-mongodb-spring-boot-starterï¼ˆMongoDBç»„ä»¶æ¨¡å—ï¼‰
â”œâ”€ silky-starter-coreï¼ˆæ ¸å¿ƒæ¨¡å—,å…¬å…±å¸¸ç”¨çš„å·¥å…·åŒ…ç±»ï¼‰
â”œâ”€ silky-starter-testï¼ˆæµ‹è¯•æ¨¡å—ï¼‰
â”‚  â”œâ”€ silky-starter-oss-testï¼ˆOSSç»„ä»¶æµ‹è¯•æ¨¡å—ï¼‰
```

### 1. silky-oss-spring-boot-starter

    OSSæ–‡ä»¶æ“ä½œç»„ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½å’Œç®¡ç†æ¥å£ï¼Œæ”¯æŒå¤šç§äº‘å­˜å‚¨å¹³å°ã€‚

åŠŸèƒ½ç‰¹æ€§ï¼š

- ç»Ÿä¸€çš„OSSæ–‡ä»¶æ“ä½œæ¥å£
- æ”¯æŒé˜¿é‡Œäº‘OSSã€åä¸ºäº‘OBSç­‰äº‘å­˜å‚¨å¹³å°
- æ™ºèƒ½ä¸Šä¼ ç­–ç•¥ï¼ˆæ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸Šä¼ æ–¹å¼ï¼‰
- å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ å’Œæ–­ç‚¹ç»­ä¼ 
- è¿›åº¦ç›‘æ§å’Œå›è°ƒæœºåˆ¶
- å®‰å…¨åŠ å¯†å’Œæƒé™æ§åˆ¶
-

### 2. silky-mongodb-spring-boot-starter

    MongoDBæ•°æ®è®¿é—®ç»„ä»¶ï¼Œæä¾›ç®€æ´é«˜æ•ˆçš„MongoDBæ“ä½œæ¥å£ã€‚

åŠŸèƒ½ç‰¹æ€§ï¼š

- ç®€æ´çš„CRUDæ“ä½œæ¥å£
- å¼ºå¤§çš„æ¡ä»¶æŸ¥è¯¢å’Œåˆ†é¡µåŠŸèƒ½
- çµæ´»çš„æ’åºå’Œå­—æ®µæŠ•å½±
- æ‰¹é‡æ“ä½œæ”¯æŒ
- ç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»º
- æ”¯æŒlambdaè¡¨è¾¾å¼æŸ¥è¯¢

### 3. silky-starter-core

    æ ¸å¿ƒæ¨¡å—ï¼ŒåŒ…å«å…¬å…±å¸¸ç”¨çš„å·¥å…·ç±»å’ŒåŸºç¡€è®¾æ–½ä»£ç ã€‚

### 4. silky-starter-test

    æµ‹è¯•æ¨¡å—ï¼ŒåŒ…å«å„ç»„ä»¶çš„æµ‹è¯•ç”¨ä¾‹å’Œç¤ºä¾‹ä»£ç ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### OSSå¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ ä¾èµ–ï¼š

åœ¨`pom.xml`ä¸­æ·»åŠ ä¾èµ–ï¼Œå¼€å¯ä¸æ»‘ä½“éªŒï¼š

```xml

<dependencies>

    <dependency>
        <groupId>com.silky.starter</groupId>
        <artifactId>silky-oss-spring-boot-starter</artifactId>
        <version>${æœ€æ–°ç‰ˆæœ¬}</version>
    </dependency>

    <!-- æ ¹æ®é…ç½®é€‰æ‹©å¯¹åº”çš„ä¾èµ–åŒ… start -->
    <!-- é˜¿é‡Œäº‘oss -->
    <dependency>
        <groupId>com.aliyun.oss</groupId>
        <artifactId>aliyun-sdk-oss</artifactId>
        <version>3.18.3</version>
    </dependency>

    <!-- åä¸ºäº‘ OBS -->
    <dependency>
        <groupId>com.huaweicloud</groupId>
        <artifactId>esdk-obs-java</artifactId>
        <version>3.25.7</version>
    </dependency>
    <!-- æ ¹æ®é…ç½®é€‰æ‹©å¯¹åº”çš„ä¾èµ–åŒ… end -->

</dependencies>
```

### 2. å¯ç”¨ç»„ä»¶

å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ï¼Œå¼€å¯ä¸æ»‘OSSåŠŸèƒ½ï¼š

```java

@SpringBootApplication
@ComponentScan({"com.silky.**"})
public class TestAppApplication {
    public static void main(String[] args) {
        SpringApplication.run(TestAppApplication.class, args);
    }
}
```

### 3. é…ç½®å‚æ•°

åœ¨`application.yml`ä¸­æ·»åŠ é…ç½®ï¼š

```yaml
silky:
  oss:
    access-key: ä½ çš„AccessKey
    secret-key: ä½ çš„SecretKey
    bucket: ä½ çš„Bucketåç§°
    # åˆ†ç‰‡ä¸Šä¼ çš„é˜ˆå€¼,é»˜è®¤128MBï¼Œå•ä½å­—èŠ‚ï¼Œæ–‡ä»¶è¶…è¿‡æ­¤å¤§å°å°†è‡ªåŠ¨åˆ†ç‰‡ä¸Šä¼ 
    multipart-threshold: 134217728 # 128 * 1024 * 1024
    # è‡ªåŠ¨åˆ†ç‰‡ä¸Šä¼ æ—¶æ¯ä¸ªåˆ†ç‰‡å¤§å°ï¼Œé»˜è®¤ 32MB
    multipart-part-size: 33554432 # 32 * 1024 * 1024
    # å¹³å°ï¼šaliyunã€huawei
    provider: aliyun
    # é˜¿é‡Œäº‘é…ç½®
    aliyun:
      endpoint: é˜¿é‡Œäº‘OSSçš„Endpoint
    # åä¸ºäº‘é…ç½®
    huawei:
      endpoint: åä¸ºäº‘çš„Endpoint
```

### MongoDBç»„ä»¶å¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ ä¾èµ–ï¼š

åœ¨`pom.xml`ä¸­æ·»åŠ ä¾èµ–ï¼Œå¼€å¯ä¸æ»‘ä½“éªŒï¼š

```xml

<dependencies>

    <dependency>
        <groupId>com.silky.starter</groupId>
        <artifactId>silky-mongodb-spring-boot-starter</artifactId>
        <version>${æœ€æ–°ç‰ˆæœ¬}</version>
    </dependency>

</dependencies>
```

### 2. å¯ç”¨ç»„ä»¶

å¯åŠ¨ç±»æ·»åŠ æ³¨è§£ï¼Œå¼€å¯ä¸æ»‘MongoDBåŠŸèƒ½ï¼š

```java

@SpringBootApplication
@ComponentScan({"com.silky.**"})
public class TestAppApplication {
    public static void main(String[] args) {
        SpringApplication.run(TestAppApplication.class, args);
    }
}
```

### 3. é…ç½®å‚æ•°

åœ¨`application.yml`ä¸­æ·»åŠ é…ç½®ï¼š

```yaml
spring:
  data:
    mongodb:
      uri: mongodb://ç”¨æˆ·å:å¯†ç @localhost:27017/æ•°æ®åº“åç§°
      # æˆ–è€…ä½¿ç”¨ä»¥ä¸‹åˆ†å¼€é…ç½®
      # host: localhost
      # port: 27017
      # database: test
      # username: user
      # password: pass
```

## ğŸ”§ API æ¥å£è¯´æ˜

### OSS APIæ¥å£è¯´æ˜

### æ ¸å¿ƒæ–¹æ³•

| æ–¹æ³•              | è¯´æ˜               | å‚æ•°                   |
|-----------------|------------------|----------------------|
| smartUpload     | æ™ºèƒ½ä¸Šä¼ ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸Šä¼ æ–¹å¼ï¼‰ | OssUploadParam       |
| downloadFile    | ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°          | DownloadFileOssParam |
| deleteFile      | åˆ é™¤äº‘ç«¯æ–‡ä»¶           | DeleteFileOssParam   |
| getFileMetadata | è·å–æ–‡ä»¶å…ƒæ•°æ®          | GetFileMetadataParam |
| genPreSignedUrl | ç”Ÿæˆé¢„ç­¾åURL         | GenPreSignedUrlParam |

### é«˜çº§ä¸Šä¼ åŠŸèƒ½

| æ–¹æ³•                         | è¯´æ˜         |
|----------------------------|------------|
| standardUploadWithCallback | å¸¦å›è°ƒçš„æ ‡å‡†ä¸Šä¼    |
| initiateMultipartUpload    | åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼     |
| uploadPart                 | ä¸Šä¼ åˆ†ç‰‡       | 
| completeMultipartUpload    | å®Œæˆåˆ†ç‰‡ä¸Šä¼      |
| abortMultipartUpload       | ç»ˆæ­¢åˆ†ç‰‡ä¸Šä¼      |
| listUploadedParts          | è·å–å·²ä¸Šä¼ çš„åˆ†ç‰‡åˆ—è¡¨ |

### æ‰©å±•åŠŸèƒ½

| æ–¹æ³•                       | è¯´æ˜                |
|--------------------------|-------------------|
| switchProvider           | åˆ‡æ¢äº‘æœåŠ¡æä¾›å•†(å¾…å®Œå–„)     |
| registerProvider         | 	æ³¨å†Œè‡ªå®šä¹‰äº‘æœåŠ¡æä¾›å•† å¾…å®Œå–„) |
| setDefaultUploadStrategy | è®¾ç½®é»˜è®¤ä¸Šä¼ ç­–ç•¥  å¾…å®Œå–„)    | 

### MongoDB APIæ¥å£è¯´æ˜

MongodbTemplateæä¾›äº†ä¸€ç³»åˆ—ç®€æ´é«˜æ•ˆçš„MongoDBæ“ä½œæ¥å£ï¼š

### æŸ¥è¯¢æ“ä½œ

| æ–¹æ³•                    | è¯´æ˜           | å‚æ•°                                                                                                            |
|-----------------------|--------------|---------------------------------------------------------------------------------------------------------------|
| findPage              | åˆ†é¡µæŸ¥è¯¢         | Page<?> page, Class<T> clazz                                                                                  |
| findPage              | æ¡ä»¶åˆ†é¡µæŸ¥è¯¢       | CriteriaWrapper criteriaWrapper, Page<?> page, Class<T> clazz                                                 |
| findPage              | æ¡ä»¶æ’åºåˆ†é¡µæŸ¥è¯¢     | CriteriaWrapper criteriaWrapper, SortBuilder sort, Page<?> page, Class<T> clazz                               |
| findById              | æ ¹æ®IDæŸ¥è¯¢       | String id, Class<T> clazz                                                                                     |
| findOneByQuery        | æ ¹æ®æ¡ä»¶æŸ¥è¯¢å•ä¸ª     | CriteriaWrapper criteriaWrapper, Class<T> clazz                                                               |
| findOneByQuery        | æ ¹æ®æ¡ä»¶å’Œæ’åºæŸ¥è¯¢å•ä¸ª  | CriteriaWrapper criteriaWrapper, SortBuilder sortBuilder, Class<T> clazz                                      |
| findListByQuery       | æ ¹æ®æ¡ä»¶æŸ¥è¯¢åˆ—è¡¨     | CriteriaWrapper criteria, Class<T> clazz                                                                      |
| findListByQuery       | æ ¹æ®æ¡ä»¶å’Œæ’åºæŸ¥è¯¢åˆ—è¡¨  | CriteriaWrapper criteria, SortBuilder sort, Class<T> clazz                                                    |
| findPropertiesByQuery | æ ¹æ®æ¡ä»¶æŸ¥æ‰¾æŸä¸ªå±æ€§   | CriteriaWrapper criteria, Class<?> documentClass, SerializableFunction<E, R> property, Class<T> propertyClass |
| findPropertiesByIds   | æ ¹æ®idé›†åˆæŸ¥æ‰¾æŸä¸ªå±æ€§ | List<String> ids, Class<?> clazz, SerializableFunction<E, R> property                                         |
| findPropertiesByQuery | æ ¹æ®æ¡ä»¶æŸ¥æ‰¾æŸä¸ªå±æ€§	  | CriteriaWrapper criteria, Class<?> documentClass, SerializableFunction<E, R> property                         |
| findIdsByQuery        | æ ¹æ®æ¡ä»¶æŸ¥è¯¢IDåˆ—è¡¨   | CriteriaWrapper criteria, Class<?> clazz                                                                      |
| findListByIds         | æ ¹æ®IDåˆ—è¡¨æŸ¥è¯¢     | Collection<String> ids, Class<T> clazz                                                                        |
| findListByIds         | æ ¹æ®IDåˆ—è¡¨å’Œæ’åºæŸ¥è¯¢  | Collection<String> ids, SortBuilder sortBuilder, Class<T> clazz                                               |
| countByQuery          | æ ¹æ®æ¡ä»¶æŸ¥è¯¢æ•°é‡     | CriteriaWrapper criteriaWrapper, Class<?> clazz                                                               |

### å¢åˆ æ”¹æ“ä½œ

| æ–¹æ³•             | è¯´æ˜       | å‚æ•°                                              |
|----------------|----------|-------------------------------------------------|
| insert         | æ’å…¥       | Object object                                   |
| batchInsert    | æ‰¹é‡æ’å…¥     | List<T> list                                    |
| updateById     | æ ¹æ®IDæ›´æ–°   | Object object                                   |
| insertOrUpdate | æ’å…¥æˆ–æ›´æ–°    | Object object                                   |
| deleteById     | æ ¹æ®idåˆ é™¤   | String id, Class<?> clazz                       |
| deleteByIds    | æ ¹æ®idåˆ—è¡¨åˆ é™¤ | List<String> ids, Class<?> clazz                |
| deleteByQuery  | æ ¹æ®æ¡ä»¶åˆ é™¤   | CriteriaWrapper criteriaWrapper, Class<?> clazz |

## ğŸ§ª ä½¿ç”¨ç¤ºä¾‹

### OSSä½¿ç”¨ç¤ºä¾‹

åŸºæœ¬æ–‡ä»¶æ“ä½œï¼ˆä¸æ»‘ä½“éªŒï¼‰ï¼š

```java
package com.silky.starter.oss.template;

import com.silky.starter.oss.OssApplicationTest;
import com.silky.starter.oss.core.enums.OssFileTypeEnum;
import com.silky.starter.oss.model.metadata.OssFileMetadata;
import com.silky.starter.oss.model.param.DeleteFileOssParam;
import com.silky.starter.oss.model.param.DownloadFileOssParam;
import com.silky.starter.oss.model.param.GetFileMetadataParam;
import com.silky.starter.oss.model.param.OssUploadParam;
import com.silky.starter.oss.model.result.OssUploadResult;
import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;

import java.io.File;
import java.time.LocalDateTime;

/**
 * OSSæ¨¡æ¿æµ‹è¯•ç±»
 *
 * @author zy
 * @date 2025-08-14 15:52
 **/
public class OssTemplateTest extends OssApplicationTest {
    @Autowired
    private OssTemplate ossTemplate;

    /**
     * æ™ºèƒ½ä¸Šä¼ æµ‹è¯•æ–¹æ³•
     */
    @Test
    public void testSmartUpload() {
        OssUploadParam param = new OssUploadParam();
        param.setObjectKey("test/1755681995122.png");
        //æ–‡ä»¶ Fileå’Œ Stream äºŒé€‰ä¸€
        param.setFile(new File("C:\\Users\\Administrator\\Desktop\\1755681995122.png"));
//        param.setStream();

        //ä»¥ä¸‹å‚æ•°å¯é€‰
        param.setExpiration(LocalDateTime.now().plusMinutes(5)); // è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºå½“å‰æ—¶é—´åŠ 5åˆ†é’Ÿ
        param.setContentType(OssFileTypeEnum.PNG.getContentType()); // è®¾ç½®æ–‡ä»¶ç±»å‹ä¸ºPNG
//        param.setMetadata(); // è®¾ç½®è‡ªå®šä¹‰å…ƒæ•°æ®ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ä¸è®¾ç½®
//        param.setFileSize(); // è®¾ç½®æ–‡ä»¶å¤§å°ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥ä¸è®¾ç½®
//        param.setPublicRead(); // è®¾ç½®æ˜¯å¦å…¬å¼€å¯è¯»ï¼Œé»˜è®¤ä¸ºtrue
//        param.setEnableEncryption(); // è®¾ç½®æ˜¯å¦å¯ç”¨åŠ å¯†ï¼Œé»˜è®¤ä¸ºfalse
        OssUploadResult result = ossTemplate.smartUpload(param);
        log.info("æ™ºèƒ½ä¸Šä¼ æµ‹è¯•æ–¹æ³•ossä¸Šä¼ ç»“æœ: {}", result);
    }

    /**
     * åˆ é™¤æ–‡ä»¶æµ‹è¯•
     */
    @Test
    public void testDeleteFile() {
        DeleteFileOssParam param = new DeleteFileOssParam();
        param.setObjectKey("test/1755681995122.png");
        ossTemplate.deleteFile(param);
        log.info("åˆ é™¤æ–‡ä»¶æµ‹è¯•æˆåŠŸ");
    }

    /**
     * å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°æµ‹è¯•
     */
    @Test
    public void testDownloadFile() {
        DownloadFileOssParam param = new DownloadFileOssParam();
        param.setObjectKey("test/1755681995122.png");
        param.setLocalFilePath("D:\\download\\11.png");
        ossTemplate.downloadFile(param);
        log.info("å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°æµ‹è¯•");
    }

    /**
     * è·å–æ–‡ä»¶å…ƒæ•°æ®æµ‹è¯•
     */
    @Test
    public void testGetFileMetadata() {
        GetFileMetadataParam param = new GetFileMetadataParam();
        param.setObjectKey("test/1755681995122.png");
        OssFileMetadata fileMetadata = ossTemplate.getFileMetadata(param);
        log.info("è·å–æ–‡ä»¶å…ƒæ•°æ®æµ‹è¯•,å“åº”ç»“æœï¼š" + fileMetadata);
    }
}
```

é«˜çº§åŠŸèƒ½ç¤ºä¾‹ï¼ˆæè‡´ä¸æ»‘ï¼‰ï¼š

```java
/**
 * OSSæ¨¡æ¿æµ‹è¯•ç±»
 *
 * @author zy
 * @date 2025-08-14 15:52
 **/
public class OssTemplateTest extends OssApplicationTest {

    // ç”Ÿæˆé¢„ç­¾åURLï¼ˆç”¨äºä¸´æ—¶è®¿é—®ï¼‰
    @Test
    public void testGenPreSignedUrl() {
        GenPreSignedUrlParam param = new GenPreSignedUrlParam();
        param.setObjectKey("test/1755681995122.png");
        param.setExpirationMinutes(30); // 30åˆ†é’Ÿæœ‰æ•ˆæœŸ

        GenPreSignedUrlResult result = ossTemplate.genPreSignedUrl(param);
        log.info("é¢„ç­¾åURL: {}", result.getUrl());
    }

    // åˆ†ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶
    @Test
    public void testMultipartUpload() {
        // 1. åˆå§‹åŒ–åˆ†ç‰‡ä¸Šä¼ 
        InitiateMultipartUploadParam initParam = new InitiateMultipartUploadParam();
        initParam.setObjectKey("largefile.zip");
        InitiateMultipartResult initResult = ossTemplate.initiateMultipartUpload(initParam);

        String uploadId = initResult.getUploadId();

        // 2. ä¸Šä¼ å„ä¸ªåˆ†ç‰‡
        for (int i = 0; i < partCount; i++) {
            UploadPartParam partParam = new UploadPartParam();
            partParam.setUploadId(uploadId);
            partParam.setPartNumber(i + 1);
            partParam.setInputStream(partInputStream);

            UploadPartResult partResult = ossTemplate.uploadPart(partParam);
            // ä¿å­˜åˆ†ç‰‡ETagä¿¡æ¯
        }

        // 3. å®Œæˆåˆ†ç‰‡ä¸Šä¼ 
        CompleteMultipartUploadParam completeParam = new CompleteMultipartUploadParam();
        completeParam.setUploadId(uploadId);
        completeParam.setObjectKey("largefile.zip");
        completeParam.setPartEtags(partEtags);

        CompleteMultipartUploadResult result = ossTemplate.completeMultipartUpload(completeParam);
        log.info("åˆ†ç‰‡ä¸Šä¼ å®Œæˆ: {}", result);
    }
}
``` 

### MongoDBä½¿ç”¨ç¤ºä¾‹

```java
package com.silky.starter.mongodb.example;

import com.silky.starter.mongodb.template.MongodbTemplate;
import com.silky.starter.mongodb.build.SortBuilder;
import com.silky.starter.mongodb.model.page.Page;
import com.silky.starter.mongodb.wrapper.CriteriaWrapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.util.List;

/**
 * MongoDBæ“ä½œRESTç¤ºä¾‹
 *
 * @author zy
 * @date 2025-09-04 16:00
 **/
@RestController
@RequestMapping("/api/users")
public class UserController {

    @Autowired
    private MongodbTemplate mongodbTemplate;

    /**
     * åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·
     */
    @GetMapping
    public Page<User> getUsers(@RequestParam(defaultValue = "1") int page,
                               @RequestParam(defaultValue = "10") int size) {
        Page<User> pageParam = new Page<>();
        pageParam.setCurrent(page);
        pageParam.setSize(size);
        return mongodbTemplate.findPage(pageParam, User.class);
    }

    /**
     * æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
     */
    @GetMapping("/{id}")
    public User getUserById(@PathVariable String id) {
        return mongodbTemplate.findById(id, User.class);
    }

    /**
     * æ·»åŠ ç”¨æˆ·
     */
    @PostMapping
    public String addUser(@RequestBody User user) {
        return mongodbTemplate.insert(user);
    }

    /**
     * æ›´æ–°ç”¨æˆ·
     */
    @PutMapping("/{id}")
    public String updateUser(@PathVariable String id, @RequestBody User user) {
        user.setId(id);
        return mongodbTemplate.updateById(user);
    }

    /**
     * åˆ é™¤ç”¨æˆ·
     */
    @DeleteMapping("/{id}")
    public void deleteUser(@PathVariable String id) {
        mongodbTemplate.deleteById(id, User.class);
    }

    /**
     * æ ¹æ®æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·
     */
    @GetMapping("/search")
    public List<User> searchUsers(@RequestParam String name,
                                  @RequestParam(required = false) Integer minAge) {
        CriteriaWrapper criteria = new CriteriaWrapper();
        criteria.eq(User::getName, name);
        if (minAge != null) {
            criteria.gte(User::age, minAge);
        }
        SortBuilder sort = new SortBuilder();
        sort.asc("age");
        return mongodbTemplate.findListByQuery(criteria, sort, User.class);
    }
}

``` 

## ğŸ”„ æ‰©å±•è‡ªå®šä¹‰äº‘æœåŠ¡

```java
// æ³¨å†Œè‡ªå®šä¹‰äº‘æœåŠ¡æä¾›å•†
@Configuration
public class OssConfig {

    @Bean
    public void registerCustomProvider(OssTemplate ossTemplate) {
        // åˆ›å»ºè‡ªå®šä¹‰æä¾›å•†é€‚é…å™¨
        OssProviderAdapter customAdapter = new CustomOssProviderAdapter();

        // æ³¨å†Œåˆ°OSSæ¨¡æ¿
        ossTemplate.registerProvider("custom", customAdapter);
    }
}

/**
 * OSSæ¨¡æ¿æµ‹è¯•ç±»
 *
 * @author zy
 * @date 2025-08-14 15:52
 **/
public class OssTemplateTest extends OssApplicationTest {

    // åˆ‡æ¢äº‘æœåŠ¡æä¾›å•†
    @Test
    public void testSwitchProvider() {
        // åˆ‡æ¢åˆ°åä¸ºäº‘
        ossTemplate.switchProvider("huawei");

        // æ‰§è¡Œä¸Šä¼ æ“ä½œ
        OssUploadParam param = new OssUploadParam();
        // ... è®¾ç½®å‚æ•°
        OssUploadResult result = ossTemplate.smartUpload(param);
    }
}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

### OSSç»„ä»¶æ³¨æ„äº‹é¡¹

1. ä¸Šä¼ å¤§æ–‡ä»¶æ—¶ï¼ˆè¶…è¿‡128MBï¼‰ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨å¯ç”¨åˆ†ç‰‡ä¸Šä¼ åŠŸèƒ½ã€‚
2. æ”¯æŒè‡ªå®šä¹‰ä¸Šä¼ ç­–ç•¥ï¼Œå¯é€šè¿‡setDefaultUploadStrategyæ–¹æ³•è®¾ç½®ã€‚
3. ç»„ä»¶å†…ç½®å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¼šæŠ›å‡ºç»Ÿä¸€çš„OssExceptionã€‚
4. æ”¯æŒé€šè¿‡switchProvideræ–¹æ³•åŠ¨æ€åˆ‡æ¢äº‘æœåŠ¡æä¾›å•†ã€‚

### MongoDBç»„ä»¶æ³¨æ„äº‹é¡¹

1. MongoDBæ“ä½œéœ€è¦ç¡®ä¿å·²æ­£ç¡®é…ç½®MongoDBè¿æ¥ä¿¡æ¯ã€‚
2. ä½¿ç”¨MongoDBåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œæ³¨æ„è®¾ç½®åˆç†çš„åˆ†é¡µå‚æ•°ä»¥é¿å…æ€§èƒ½é—®é¢˜ã€‚
3. æ‰¹é‡æ“ä½œæ—¶æ³¨æ„æ•°æ®é‡ï¼Œé¿å…ä¸€æ¬¡æ€§æ“ä½œè¿‡å¤šæ•°æ®å¯¼è‡´å†…å­˜æº¢å‡ºã€‚
4. å¤æ‚æŸ¥è¯¢å»ºè®®ä½¿ç”¨ç´¢å¼•ä»¥æé«˜æŸ¥è¯¢æ€§èƒ½ã€‚

## ğŸ†˜ è·å–å¸®åŠ©

1. å¦‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æIssueï¼Œæˆ–é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ”¯æŒï¼š824414828@qq.comæˆ–è€…æ·»åŠ å¾®ä¿¡å·:824414828
2. æŸ¥çœ‹ç»„ä»¶æºç ï¼š
    - OSSç»„ä»¶ï¼šsilky-oss-spring-boot-starter
    - MongoDBç»„ä»¶ï¼šsilky-starter-mongodb
3. å‚è€ƒæµ‹è¯•ç¤ºä¾‹ï¼š
    - OSSæµ‹è¯•ï¼šsilky-starter-oss-test
    - MongoDBæµ‹è¯•ï¼šsilky-starter-mongodb-test
4. è”ç³»å¼€å‘å›¢é˜Ÿè·å–æŠ€æœ¯æ”¯æŒã€‚

### ğŸ’³æèµ 

å¦‚æœä½ è§‰å¾—æˆ‘çš„å·¥ä½œå¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç‚¹ä¸ª Star æˆ–æèµ è¯·ä½œè€…å–æ¯å’–å•¡~ï¼Œåœ¨æ­¤è¡¨ç¤ºæ„Ÿè°¢ï¼

<img src="https://petsgo.oss-cn-shenzhen.aliyuncs.com/prod/wx.jpg" height="300px" alt="å¾®ä¿¡"><img src="https://petsgo.oss-cn-shenzhen.aliyuncs.com/prod/alipay.jpg" height="300px" alt="æ”¯ä»˜å®">

æˆ–è€…ç‚¹å‡»ä»¥ä¸‹é“¾æ¥ï¼Œå°†é¡µé¢æ‹‰åˆ°æœ€ä¸‹æ–¹ç‚¹å‡»â€œæèµ â€å³å¯

[Giteeä¸Šæèµ ](https://gitee.com/zeng_er/silky-starter)

-------
